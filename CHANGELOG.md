# Changelog

## [Unreleased]

### Added
- Professional PDF Export functionality
  - Beautiful, clean design with custom typography
  - Comprehensive report sections:
    - Demographics overview
    - Census analysis
    - Financial profile and risk factors
    - Behavioral insights
    - Lifestyle analysis
    - Spending habits breakdown
  - Loading state indication
  - Error handling with user feedback
  - Custom styling with modern color scheme
  - Proper formatting for dates and currency
  - Version tracking and metadata
- Enhanced Export/Import functionality
  - Comprehensive JSON export including all generated data
    - Demographics and Census insights
    - LLM feedback and analysis
    - Lifestyle analysis and daily schedule
    - Spending habits and financial data
    - Export metadata and versioning
  - Improved JSON import with data validation
    - Automatic re-running of analysis on import
    - Data consistency checks
    - Version compatibility checking
  - Placeholder for future PDF export
  - Seamless integration with main workflow
- New "Day in the Life" feature
  - Detailed daily schedule generation
  - Timeline-based narrative of activities
  - Lifestyle analysis based on demographics
  - Markdown formatting for better readability
  - Interactive visualizations with Plotly
  - Marketing insights for businesses
  - Financial profiling for institutions
  - Location analysis for urban planners
- Enhanced LLM feedback component with markdown rendering support
- Added dark mode support for markdown content
- Added Heroicons for improved UI visuals
- Enhanced form synchronization with natural language input
  - Immediate form population from NLP
  - Refined results from OpenAI
  - Seamless UX between input methods
- Improvements in spending calculations and demographic insights
- State persistence for LLM components using localStorage
  - Cached insights between tab switches
  - Reduced unnecessary API calls
  - Improved performance and UX
- New "What If" Scenarios feature
  - Interactive scenario builder with multiple categories:
    - Income changes and adjustments
    - Location changes with cost of living impact
    - Market condition simulations
    - Life event impact analysis
    - Economic policy effects
  - Real-time scenario generation and analysis
  - Dynamic UI controls (sliders, dropdowns)
  - Side-by-side comparison with original demographics
  - Automatic impact analysis and visualization
  - Integration with existing insights and charts
  - Seamless state management
- New "Price this product" feature
  - Interactive product pricing analysis tool
  - Comprehensive pricing factors:
    - Demographic spending patterns
    - Market conditions and trends
    - Competitive analysis
    - Price sensitivity metrics
  - Visual price range recommendations
  - Detailed pricing justification
  - Dynamic price elasticity analysis
  - Target market fit assessment
  - Purchase likelihood predictions
  - Custom product category support
  - Real-time price optimization suggestions
- New "Correlation Insights" feature
  - Interactive correlation analysis between key metrics
  - Dynamic visualization of relationships:
    - Spending vs market conditions
    - Income vs spending patterns
    - Portfolio allocation vs risk factors
    - Location impact on financial decisions
  - Real-time data processing and visualization
  - Caching for improved performance
  - Responsive charts with Plotly integration
  - Comprehensive tooltips and explanations
  - State persistence between tab switches
- New "X vs Y Comparison" feature
  - Interactive metric comparison tool
  - Dynamic visualization of relationships:
    - Spending vs Income analysis
    - Portfolio vs Risk metrics
    - Savings vs Expenses tracking
    - Asset allocation comparisons
  - Real-time data processing
  - Responsive scatter plots with trend lines
  - Custom metric selection interface
  - Detailed analysis tooltips
  - State persistence with caching
  - Export capabilities for comparison data
- Streaming response support for LLM components
  - Real-time feedback display in LLMFeedback component
  - Improved user experience with immediate response visibility
  - Efficient handling of large language model outputs
  - Reduced perceived latency for users
- Interactive location map in analysis tab
  - Google Maps integration for visual location representation
  - Fallback to world map when no specific location is provided
  - Automatic city/state/country detection and display
  - Responsive design with proper aspect ratio
- New "Word-of-Mouth" feature
  - Interactive social network graph visualization
  - Network analysis and metrics:
    - Network size and reach potential
    - Average influence score
    - Key connectors identification
    - Virality scoring
  - Strategic recommendations:
    - Network growth tactics
    - Influencer engagement strategies
    - Content optimization
    - Channel selection
  - Real-time graph interactions
  - Caching for improved performance
  - Integration with GPT-4o for analysis
  - Beautiful force-directed graph visualization
  - Animated transitions and interactions

### Changed
- Updated wording to reflect digital twin creation for others rather than self
- Fixed Census API integration issues
- Improved error handling in demographic data fetching
- Reorganized analysis tab with new lifestyle components
- Enhanced UX flow with automatic tab switching after import
- Updated logo design with snake emoji and stylized text
- Enhanced location insights presentation with grid layout
- Improved error handling for location data

### Fixed
- Resolved API endpoint issues with explicit URLs
- Fixed form synchronization issues
- Corrected possessive language in UI text
- Fixed multiple API calls in LLM components
- Fixed SSR issues with Plotly integration
- Export/Import functionality
  - Fixed null value handling in JSON exports
  - Improved PDF generation error handling
  - Added graceful fallbacks for missing data in PDF exports
  - Enhanced error messages for better debugging
  - Fixed PDF generation issues with empty sections
- PDF Export functionality
  - Fixed handling of structured census insights
  - Added proper null checks for all data fields
  - Improved PDF generation error handling
  - Enhanced layout for census data with subsections
  - Added fallback values for missing data
  - Fixed React-PDF component issues
  - Fixed font loading issues by using system fonts
  - Added nested error handling for PDF generation
  - Improved error messages for debugging
  - Added descriptive filenames for exported PDFs
  - Fixed DataView bounds error
- Enhanced persona generation system
  - Added structured education traits for all education levels
  - Fixed spreading of education traits in persona generation
  - Added new traits for better demographic profiling
  - Improved trait categorization for education levels
  - Added support for Doctoral Degree education level
- LLM Component Improvements
  - Fixed string conversion for markdown content
  - Added proper type checking for LLM responses
  - Enhanced error handling for malformed responses
  - Improved debug logging for API responses
  - Maintained gpt-4o model compatibility
  - Added safeguards against object-to-string conversion errors
  - Added smart parsing to handle different JSON response structures
  - Improved markdown content extraction from nested objects
  - Enhanced caching to store properly formatted content
  - Fixed JSON parsing of markdown code fence responses
  - Added response cleaning for OpenAI API responses
- PDF export spending analysis now correctly displays currency values
  - Fixed $NaN display issues in spending breakdown
  - Improved percentage calculations
  - Added proper currency formatting
  - Added fallback for undefined values
- Fixed spending habits type mismatch
  - Added proper amount calculation based on income percentage
  - Ensured consistent data structure between persona and state
  - Improved type safety in spending habits transformation
- Improved type safety in demographic form
  - Fixed null handling in form initialization
  - Added proper type definitions for form props
  - Ensured consistent handling of optional fields
  - Added proper spreading of initial data
- Fixed type safety in ExportImport component
  - Added proper null checks for required props
  - Improved component rendering conditions
  - Enhanced type safety in data passing
  - Maintained UI structure with conditional rendering
- Fixed type safety in DemographicInsights component
  - Added proper type assertions for filtered insights
  - Improved array type narrowing
  - Enhanced type safety in section rendering
  - Maintained component functionality

## [0.1.0] - 2024-01-18
- Initial release with basic Census API integration

### Fixed
- Fixed PDF export type errors by properly using Document and Page components
- Improved PDF generation with renderToFile for better type safety
- Enhanced PDF component structure and styling
- Fixed type safety in ExportImport component
- Added proper type assertions for filtered insights
- Improved array type narrowing
- Enhanced type safety in section rendering
- Maintained component functionality 